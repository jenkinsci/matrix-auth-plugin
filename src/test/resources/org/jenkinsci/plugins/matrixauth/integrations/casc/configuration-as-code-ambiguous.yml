jenkins:
  authorizationStrategy:
    projectMatrix:
      permissions:
        - ambiguous: "authenticated"
          permission: "Agent/Build"
        - ambiguous: "authenticated"
          permission: "Agent/Configure"
        - ambiguous: "authenticated"
          permission: "Agent/Connect"
        - ambiguous: "authenticated"
          permission: "Agent/Create"
        - ambiguous: "authenticated"
          permission: "Agent/Delete"
        - ambiguous: "authenticated"
          permission: "Agent/Disconnect"
        - ambiguous: "authenticated"
          permission: "Credentials/Create"
        - ambiguous: "authenticated"
          permission: "Credentials/Delete"
        - ambiguous: "authenticated"
          permission: "Credentials/ManageDomains"
        - ambiguous: "authenticated"
          permission: "Credentials/Update"
        - ambiguous: "authenticated"
          permission: "Credentials/View"
        - ambiguous: "authenticated"
          permission: "Job/Build"
        - ambiguous: "authenticated"
          permission: "Job/Cancel"
        - ambiguous: "authenticated"
          permission: "Job/Configure"
        - ambiguous: "authenticated"
          permission: "Job/Create"
        - ambiguous: "authenticated"
          permission: "Job/Delete"
        - ambiguous: "authenticated"
          permission: "Job/Discover"
        - ambiguous: "authenticated"
          permission: "Job/Move"
        - ambiguous: "authenticated"
          permission: "Job/Read"
        - ambiguous: "authenticated"
          permission: "Job/Workspace"
        - ambiguous: "anonymous"
          permission: "Overall/Read"
        - ambiguous: "authenticated"
          permission: "Overall/Administer"
        - ambiguous: "authenticated"
          permission: "Overall/Read"
        - ambiguous: "authenticated"
          permission: "Run/Delete"
        - ambiguous: "authenticated"
          permission: "Run/Replay"
        - ambiguous: "authenticated"
          permission: "Run/Update"
        - ambiguous: "authenticated"
          permission: "View/Configure"
        - ambiguous: "authenticated"
          permission: "View/Create"
        - ambiguous: "authenticated"
          permission: "View/Delete"
        - ambiguous: "authenticated"
          permission: "View/Read"
  nodes:
    - permanent:
        launcher:
          jnlp:
            workDirSettings:
              disabled: false
              failIfWorkDirIsMissing: false
              internalDir: "remoting"
        name: "agent1"
        nodeProperties:
          - authorizationMatrix:
              inheritanceStrategy: "inheritingGlobal"
              permissions:
                - ambiguous: "authenticated"
                  permission: "Agent/Disconnect"
                - ambiguous: "authenticated"
                  permission: "Agent/Build"
                - ambiguous: "anonymous"
                  permission: "Agent/Build"
        numExecutors: 1
        retentionStrategy: "always"
  securityRealm:
    local:
      allowsSignup: true
      enableCaptcha: false
jobs:
  - script: >
      folder('generated') {
        properties {
          authorizationMatrix {
            inheritanceStrategy {
                nonInheriting()
            }
            permissions([
                'Job/Build:authenticated',
                'Job/Configure:authenticated',
                'Job/Delete:authenticated',
                'Job/Read:authenticated',
            ])
          }
        }
      }