jenkins:
  authorizationStrategy:
    projectMatrix:
      permissions:
      - permission: "Agent/Build"
        group: "authenticated"
      - permission: "Agent/Configure"
        group: "authenticated"
      - permission: "Agent/Connect"
        group: "authenticated"
      - permission: "Agent/Create"
        group: "authenticated"
      - permission: "Agent/Delete"
        group: "authenticated"
      - permission: "Agent/Disconnect"
        group: "authenticated"
      - permission: "Credentials/Create"
        group: "authenticated"
      - permission: "Credentials/Delete"
        group: "authenticated"
      - permission: "Credentials/ManageDomains"
        group: "authenticated"
      - permission: "Credentials/Update"
        group: "authenticated"
      - permission: "Credentials/View"
        group: "authenticated"
      - permission: "Job/Build"
        group: "authenticated"
      - permission: "Job/Cancel"
        group: "authenticated"
      - permission: "Job/Configure"
        group: "authenticated"
      - permission: "Job/Create"
        group: "authenticated"
      - permission: "Job/Delete"
        group: "authenticated"
      - permission: "Job/Discover"
        group: "authenticated"
      - permission: "Job/Move"
        group: "authenticated"
      - permission: "Job/Read"
        group: "authenticated"
      - permission: "Job/Workspace"
        group: "authenticated"
      - permission: "Overall/Administer"
        group: "authenticated"
      - permission: "Overall/Read"
        group: "authenticated"
      - permission: "Run/Delete"
        group: "authenticated"
      - permission: "Run/Replay"
        group: "authenticated"
      - permission: "Run/Update"
        group: "authenticated"
      - permission: "View/Configure"
        group: "authenticated"
      - permission: "View/Create"
        group: "authenticated"
      - permission: "View/Delete"
        group: "authenticated"
      - permission: "View/Read"
        group: "authenticated"
      - user: "anonymous"
        permission: "Overall/Read"
  nodes:
  - permanent:
      launcher:
        jnlp:
          workDirSettings:
            disabled: false
            failIfWorkDirIsMissing: false
            internalDir: "remoting"
      name: "agent1"
      nodeProperties:
      - authorizationMatrix:
          inheritanceStrategy: "inheritingGlobal"
          permissions:
          - permission: "Agent/Disconnect"
            group: "authenticated"
          - permission: "Agent/Build"
            group: "authenticated"
          - user: "anonymous"
            permission: "Agent/Build"
      numExecutors: 1
      retentionStrategy: "always"
  securityRealm:
    local:
      allowsSignup: true
      enableCaptcha: false
jobs:
- script: >
    folder('generated') {
      properties {
        authorizationMatrix {
          inheritanceStrategy {
              nonInheriting()
          }
          permissions([
              'GROUP:Job/Build:authenticated',
              'GROUP:Job/Configure:authenticated',
              'GROUP:Job/Delete:authenticated',
              'GROUP:Job/Read:authenticated',
          ])
        }
      }
    }